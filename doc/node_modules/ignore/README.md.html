<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/ignore/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#ignore">ignore</a>
      </div>

      <div class="heading h5">
        <a href="#tested-on">Tested on</a>
      </div>

      <div class="heading h2">
        <a href="#table-of-main-contents">Table Of Main Contents</a>
      </div>

      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h3">
        <a href="#filter-the-given-paths">Filter the given paths</a>
      </div>

      <div class="heading h3">
        <a href="#as-the-filter-function">As the filter function</a>
      </div>

      <div class="heading h3">
        <a href="#win32-paths-will-be-handled">Win32 paths will be handled</a>
      </div>

      <div class="heading h2">
        <a href="#why-another-ignore">Why another ignore?</a>
      </div>

      <div class="heading h2">
        <a href="#methods">Methods</a>
      </div>

      <div class="heading h3">
        <a href="#.add-pattern">.add(pattern)</a>
      </div>

      <div class="heading h3">
        <a href="#.add-patterns">.add(patterns)</a>
      </div>

      <div class="heading h3">
        <a href="#.addignorefile-path">.addIgnoreFile(path)</a>
      </div>

      <div class="heading h3">
        <a href="#.ignores-pathname">.ignores(pathname)</a>
      </div>

      <div class="heading h3">
        <a href="#.filter-paths">.filter(paths)</a>
      </div>

      <div class="heading h3">
        <a href="#.createfilter">.createFilter()</a>
      </div>

      <div class="heading h2">
        <a href="#upgrade-2.x-greater-3.x">Upgrade 2.x -&amp;gt; 3.x</a>
      </div>

      <div class="heading h2">
        <a href="#contributing">Contributing</a>
      </div>

      <div class="heading h4">
        <a href="#collaborators">Collaborators</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><table><thead>
  <tr>
    <th>Linux</th>
    <th>OS X</th>
    <th>Windows</th>
    <th>Coverage</th>
    <th>Downloads</th>
  </tr>
</thead><tbody><tr>
  <td colspan="2" align="center">
    <a href="https://travis-ci.org/kaelzhang/node-ignore">
    <img
      src="https://travis-ci.org/kaelzhang/node-ignore.svg?branch=master"
      alt="Build Status" /></a>
  </td>
  <td align="center">
    <a href="https://ci.appveyor.com/project/kaelzhang/node-ignore">
    <img
      src="https://ci.appveyor.com/api/projects/status/github/kaelzhang/node-ignore?branch=master&svg=true"
      alt="Windows Build Status" /></a>
  </td>
  <td align="center">
    <a href="https://codecov.io/gh/kaelzhang/node-ignore">
    <img
      src="https://codecov.io/gh/kaelzhang/node-ignore/branch/master/graph/badge.svg"
      alt="Coverage Status" /></a>
  </td>
  <td align="center">
    <a href="https://www.npmjs.org/package/ignore">
    <img
      src="http://img.shields.io/npm/dm/ignore.svg"
      alt="npm module downloads per month" /></a>
  </td>
</tr></tbody></table>
<div class="pilwrap" id="ignore">
  <h1>
    <a href="#ignore" name="ignore" class="pilcrow"></a>
ignore
  </h1>
</div>
<p><code>ignore</code> is a manager, filter and parser which implemented in pure JavaScript according to the .gitignore <a href="http://git-scm.com/docs/gitignore">spec</a>.</p>
<p>Pay attention that <a href="https://www.npmjs.org/package/minimatch"><code>minimatch</code></a> does not work in the gitignore way. To filter filenames according to .gitignore file, I recommend this module.</p>
<div class="pilwrap" id="tested-on">
  <h5>
    <a href="#tested-on" name="tested-on" class="pilcrow"></a>
Tested on
  </h5>
</div>
<ul>
<li>Linux + Node: <code>0.8</code> - <code>7.x</code></li>
<li>Windows + Node: <code>0.10</code> - <code>7.x</code>, node &lt; <code>0.10</code> is not tested due to the lack of support of appveyor.</li>
</ul>
<p>Actually, <code>ignore</code> does not rely on any versions of node specially.</p>
<div class="pilwrap" id="table-of-main-contents">
  <h2>
    <a href="#table-of-main-contents" name="table-of-main-contents" class="pilcrow"></a>
Table Of Main Contents
  </h2>
</div>
<ul>
<li><a href="#usage.html">Usage</a></li>
<li><a href="#upgrade-2x---3x.html">Guide for 2.x -&gt; 3.x</a></li>
<li><a href="#contributing.html">Contributing</a></li>
<li>Related Packages
<ul>
<li><a href="https://www.npmjs.com/package/glob-gitignore"><code>glob-gitignore</code></a> matches files using patterns and filters them according to gitignore rules.</li>
</ul>
</li>
</ul>
<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h2>
</div>
<pre><code class="js"><span class="hljs-keyword">const</span> ignore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ignore'</span>)
<span class="hljs-keyword">const</span> ig = ignore().add([<span class="hljs-string">'.abc/*'</span>, <span class="hljs-string">'!.abc/d/'</span>])
</code></pre>
<div class="pilwrap" id="filter-the-given-paths">
  <h3>
    <a href="#filter-the-given-paths" name="filter-the-given-paths" class="pilcrow"></a>
Filter the given paths
  </h3>
</div>
<pre><code class="js"><span class="hljs-keyword">const</span> paths = [
  <span class="hljs-string">'.abc/a.js'</span>,    <span class="hljs-comment">// filtered out</span>
  <span class="hljs-string">'.abc/d/e.js'</span>   <span class="hljs-comment">// included</span>
]

ig.filter(paths)        <span class="hljs-comment">// ['.abc/d/e.js']</span>
ig.ignores(<span class="hljs-string">'.abc/a.js'</span>) <span class="hljs-comment">// true</span>
</code></pre>
<div class="pilwrap" id="as-the-filter-function">
  <h3>
    <a href="#as-the-filter-function" name="as-the-filter-function" class="pilcrow"></a>
As the filter function
  </h3>
</div>
<pre><code class="js">paths.filter(ig.createFilter()); <span class="hljs-comment">// ['.abc/d/e.js']</span>
</code></pre>
<div class="pilwrap" id="win32-paths-will-be-handled">
  <h3>
    <a href="#win32-paths-will-be-handled" name="win32-paths-will-be-handled" class="pilcrow"></a>
Win32 paths will be handled
  </h3>
</div>
<pre><code class="js">ig.filter([<span class="hljs-string">'.abc\\a.js'</span>, <span class="hljs-string">'.abc\\d\\e.js'</span>])
<span class="hljs-comment">// if the code above runs on windows, the result will be</span>
<span class="hljs-comment">// ['.abc\\d\\e.js']</span>
</code></pre>
<div class="pilwrap" id="why-another-ignore">
  <h2>
    <a href="#why-another-ignore" name="why-another-ignore" class="pilcrow"></a>
Why another ignore?
  </h2>
</div>
<ul>
<li>
<p><code>ignore</code> is a standalone module, and is much simpler so that it could easy work with other programs, unlike <a href="https://npmjs.org/~isaacs">isaacs</a>'s <a href="https://npmjs.org/package/fstream-ignore">fstream-ignore</a> which must work with the modules of the fstream family.</p>
</li>
<li>
<p><code>ignore</code> only contains utility methods to filter paths according to the specified ignore rules, so</p>
<ul>
<li><code>ignore</code> never try to find out ignore rules by traversing directories or fetching from git configurations.</li>
<li><code>ignore</code> don't cares about sub-modules of git projects.</li>
</ul>
</li>
<li>
<p>Exactly according to <a href="http://git-scm.com/docs/gitignore">gitignore man page</a>, fixes some known matching issues of fstream-ignore, such as:</p>
<ul>
<li>'<code>/*.js</code>' should only match '<code>a.js</code>', but not '<code>abc/a.js</code>'.</li>
<li>'<code>**/foo</code>' should match '<code>foo</code>' anywhere.</li>
<li>Prevent re-including a file if a parent directory of that file is excluded.</li>
<li>Handle trailing whitespaces:
<ul>
<li><code>'a '</code>(one space) should not match <code>'a '</code>(two spaces).</li>
<li><code>'a \ '</code> matches <code>'a '</code></li>
</ul>
</li>
<li>All test cases are verified with the result of <code>git check-ignore</code>.</li>
</ul>
</li>
</ul>
<div class="pilwrap" id="methods">
  <h2>
    <a href="#methods" name="methods" class="pilcrow"></a>
Methods
  </h2>
</div>
<div class="pilwrap" id=".add-pattern">
  <h3>
    <a href="#.add-pattern" name=".add-pattern" class="pilcrow"></a>
.add(pattern)
  </h3>
</div>
<div class="pilwrap" id=".add-patterns">
  <h3>
    <a href="#.add-patterns" name=".add-patterns" class="pilcrow"></a>
.add(patterns)
  </h3>
</div>
<ul>
<li><strong>pattern</strong> <code>String|Ignore</code> An ignore pattern string, or the <code>Ignore</code> instance</li>
<li><strong>patterns</strong> <code>Array.&lt;pattern&gt;</code> Array of ignore patterns.</li>
</ul>
<p>Adds a rule or several rules to the current manager.</p>
<p>Returns <code>this</code></p>
<p>Notice that a line starting with <code>'#'</code>(hash) is treated as a comment. Put a backslash (<code>'\'</code>) in front of the first hash for patterns that begin with a hash, if you want to ignore a file with a hash at the beginning of the filename.</p>
<pre><code class="js">ignore().add(<span class="hljs-string">'#abc'</span>).ignores(<span class="hljs-string">'#abc'</span>)    <span class="hljs-comment">// false</span>
ignore().add(<span class="hljs-string">'\#abc'</span>).ignores(<span class="hljs-string">'#abc'</span>)   <span class="hljs-comment">// true</span>
</code></pre>
<p><code>pattern</code> could either be a line of ignore pattern or a string of multiple ignore patterns, which means we could just <code>ignore().add()</code> the content of a ignore file:</p>
<pre><code class="js">ignore()
.add(fs.readFileSync(filenameOfGitignore).toString())
.filter(filenames)
</code></pre>
<p><code>pattern</code> could also be an <code>ignore</code> instance, so that we could easily inherit the rules of another <code>Ignore</code> instance.</p>
<div class="pilwrap" id=".addignorefile-path">
  <h3>
    <a href="#.addignorefile-path" name=".addignorefile-path" class="pilcrow"></a>
<strike>.addIgnoreFile(path)</strike>
  </h3>
</div>
<p>REMOVED in <code>3.x</code> for now.</p>
<p>To upgrade <code>ignore@2.x</code> up to <code>3.x</code>, use</p>
<pre><code class="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)

<span class="hljs-keyword">if</span> (fs.existsSync(filename)) {
  ignore().add(fs.readFileSync(filename).toString())
}
</code></pre>
<p>instead.</p>
<div class="pilwrap" id=".ignores-pathname">
  <h3>
    <a href="#.ignores-pathname" name=".ignores-pathname" class="pilcrow"></a>
.ignores(pathname)
  </h3>
</div>
<blockquote>
<p>new in 3.2.0</p>
</blockquote>
<p>Returns <code>Boolean</code> whether <code>pathname</code> should be ignored.</p>
<pre><code class="js">ig.ignores(<span class="hljs-string">'.abc/a.js'</span>)    <span class="hljs-comment">// true</span>
</code></pre>
<div class="pilwrap" id=".filter-paths">
  <h3>
    <a href="#.filter-paths" name=".filter-paths" class="pilcrow"></a>
.filter(paths)
  </h3>
</div>
<p>Filters the given array of pathnames, and returns the filtered array.</p>
<ul>
<li><strong>paths</strong> <code>Array.&lt;path&gt;</code> The array of <code>pathname</code>s to be filtered.</li>
</ul>
<p><strong>NOTICE</strong> that:</p>
<ul>
<li><code>pathname</code> should be a string that have been <code>path.join()</code>ed, or the return value of <code>path.relative()</code> to the current directory.</li>
</ul>
<pre><code class="js"><span class="hljs-comment">// WRONG</span>
ig.ignores(<span class="hljs-string">'./abc'</span>)

<span class="hljs-comment">// WRONG, for it will never happen.</span>
<span class="hljs-comment">// If the gitignore rule locates at the root directory,</span>
<span class="hljs-comment">// `'/abc'` should be changed to `'abc'`.</span>
<span class="hljs-comment">// ```</span>
<span class="hljs-comment">// path.relative('/', '/abc')  -&gt; 'abc'</span>
<span class="hljs-comment">// ```</span>
ig.ignores(<span class="hljs-string">'/abc'</span>)

<span class="hljs-comment">// Right</span>
ig.ignores(<span class="hljs-string">'abc'</span>)

<span class="hljs-comment">// Right</span>
ig.ignores(path.join(<span class="hljs-string">'./abc'</span>))  <span class="hljs-comment">// path.join('./abc') -&gt; 'abc'</span>
</code></pre>
<ul>
<li>In other words, each <code>pathname</code> here should be a relative path to the directory of the git ignore rules.</li>
</ul>
<p>Suppose the dir structure is:</p>
<pre><code>/path/to/your/repo
    |-- a
    |   |-- a.js
    |
    |-- .b
    |
    |-- .c
         |-- .DS_store
</code></pre>
<p>Then the <code>paths</code> might be like this:</p>
<pre><code class="js">[
  <span class="hljs-string">'a/a.js'</span>
  <span class="hljs-string">'.b'</span>,
  <span class="hljs-string">'.c/.DS_store'</span>
]
</code></pre>
<p>Usually, you could use <a href="http://npmjs.org/package/glob"><code>glob</code></a> with <code>option.mark = true</code> to fetch the structure of the current directory:</p>
<pre><code class="js"><span class="hljs-keyword">const</span> glob = <span class="hljs-built_in">require</span>(<span class="hljs-string">'glob'</span>)

glob(<span class="hljs-string">'**'</span>, {
  <span class="hljs-comment">// Adds a / character to directory matches.</span>
  mark: <span class="hljs-literal">true</span>
}, (err, files) =&gt; {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.error(err)
  }

  <span class="hljs-keyword">let</span> filtered = ignore().add(patterns).filter(files)
  <span class="hljs-built_in">console</span>.log(filtered)
})
</code></pre>
<div class="pilwrap" id=".createfilter">
  <h3>
    <a href="#.createfilter" name=".createfilter" class="pilcrow"></a>
.createFilter()
  </h3>
</div>
<p>Creates a filter function which could filter an array of paths with <code>Array.prototype.filter</code>.</p>
<p>Returns <code>function(path)</code> the filter function.</p>
<hr>
<div class="pilwrap" id="upgrade-2.x-greater-3.x">
  <h2>
    <a href="#upgrade-2.x-greater-3.x" name="upgrade-2.x-greater-3.x" class="pilcrow"></a>
Upgrade 2.x -&gt; 3.x
  </h2>
</div>
<ul>
<li>All <code>options</code> of 2.x are unnecessary and removed, so just remove them.</li>
<li><code>ignore()</code> instance is no longer an <a href="nodejs.org/api/events.html.html"><code>EventEmitter</code></a>, and all events are unnecessary and removed.</li>
<li><code>.addIgnoreFile()</code> is removed, see the <a href="#addignorefilepath.html">.addIgnoreFile</a> section for details.</li>
</ul>
<hr>
<div class="pilwrap" id="contributing">
  <h2>
    <a href="#contributing" name="contributing" class="pilcrow"></a>
Contributing
  </h2>
</div>
<p>The code of <code>node-ignore</code> is based on es6 and babel, but babel and its preset is not included in the <code>dependencies</code> field of package.json, so that the installation process of test cases will not fail in older versions of node.</p>
<p>So use <code>bash install.sh</code> to install dependencies and <code>bash test.sh</code> to run test cases in your local machine.</p>
<div class="pilwrap" id="collaborators">
  <h4>
    <a href="#collaborators" name="collaborators" class="pilcrow"></a>
Collaborators
  </h4>
</div>
<ul>
<li><a href="https://github.com/SamyPesse">SamyPesse</a> <em>Samy Pessé</em></li>
<li><a href="https://github.com/azproduction">azproduction</a> <em>Mikhail Davydov</em></li>
<li><a href="https://github.com/TrySound">TrySound</a> <em>Bogdan Chadkin</em></li>
<li><a href="https://github.com/JanMattner">JanMattner</a> <em>Jan Mattner</em></li>
</ul>
</div>
  </div>
</body>
</html>
