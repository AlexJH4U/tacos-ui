<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/es6-promisify/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#es6-promisify">es6-promisify</a>
      </div>

      <div class="heading h2">
        <a href="#install">Install</a>
      </div>

      <div class="heading h2">
        <a href="#example">Example</a>
      </div>

      <div class="heading h2">
        <a href="#promisify-methods">Promisify methods</a>
      </div>

      <div class="heading h2">
        <a href="#handle-callback-multiple-arguments">Handle callback multiple arguments</a>
      </div>

      <div class="heading h3">
        <a href="#tests">Tests</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><p><a href="https://travis-ci.org/digitaldesignlabs/es6-promisify"><img src="https://travis-ci.org/digitaldesignlabs/es6-promisify.svg" alt="Travis CI"></a></p>
<div class="pilwrap" id="es6-promisify">
  <h1>
    <a href="#es6-promisify" name="es6-promisify" class="pilcrow"></a>
es6-promisify
  </h1>
</div>
<p>Converts callback-based functions to Promise-based functions.</p>
<div class="pilwrap" id="install">
  <h2>
    <a href="#install" name="install" class="pilcrow"></a>
Install
  </h2>
</div>
<p>Install with <a href="https://npmjs.org/package/es6-promisify">npm</a></p>
<pre><code class="bash">npm install --save es6-promisify
</code></pre>
<div class="pilwrap" id="example">
  <h2>
    <a href="#example" name="example" class="pilcrow"></a>
Example
  </h2>
</div>
<pre><code class="js"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-comment">// Declare variables</span>
<span class="hljs-keyword">const</span> promisify = <span class="hljs-built_in">require</span>(<span class="hljs-string">"es6-promisify"</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);

<span class="hljs-comment">// Convert the stat function</span>
<span class="hljs-keyword">const</span> stat = promisify(fs.stat);

<span class="hljs-comment">// Now usable as a promise!</span>
stat(<span class="hljs-string">"example.txt"</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">stats</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Got stats"</span>, stats);
}).catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Yikes!"</span>, err);
});
</code></pre>
<div class="pilwrap" id="promisify-methods">
  <h2>
    <a href="#promisify-methods" name="promisify-methods" class="pilcrow"></a>
Promisify methods
  </h2>
</div>
<pre><code class="js"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-comment">// Declare variables</span>
<span class="hljs-keyword">const</span> promisify = <span class="hljs-built_in">require</span>(<span class="hljs-string">"es6-promisify"</span>);
<span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">"redis"</span>).createClient(<span class="hljs-number">6379</span>, <span class="hljs-string">"localhost"</span>);

<span class="hljs-comment">// Create a promise-based version of send_command</span>
<span class="hljs-keyword">const</span> client = promisify(redis.send_command, redis);

<span class="hljs-comment">// Send commands to redis and get a promise back</span>
client(<span class="hljs-string">"ping"</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">pong</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Got"</span>, pong);
}).catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Unexpected error"</span>, err);
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    redis.quit();
});
</code></pre>
<div class="pilwrap" id="handle-callback-multiple-arguments">
  <h2>
    <a href="#handle-callback-multiple-arguments" name="handle-callback-multiple-arguments" class="pilcrow"></a>
Handle callback multiple arguments
  </h2>
</div>
<pre><code class="js"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-comment">// Declare functions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params">cb</span>) </span>{
    <span class="hljs-keyword">return</span> cb(<span class="hljs-literal">undefined</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
}

<span class="hljs-comment">// Declare variables</span>
<span class="hljs-keyword">const</span> promisify = <span class="hljs-built_in">require</span>(<span class="hljs-string">"es6-promisify"</span>);

<span class="hljs-comment">// Create promise-based version of test</span>
<span class="hljs-keyword">const</span> single = promisify(test);
<span class="hljs-keyword">const</span> multi = promisify(test, {<span class="hljs-attr">multiArgs</span>: <span class="hljs-literal">true</span>});

<span class="hljs-comment">// Discards additional arguments</span>
single().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
    <span class="hljs-built_in">console</span>.log(result); <span class="hljs-comment">// 1</span>
});

<span class="hljs-comment">// Returns all arguments as an array</span>
multi().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
    <span class="hljs-built_in">console</span>.log(result); <span class="hljs-comment">// [1, 2, 3]</span>
});
</code></pre>
<div class="pilwrap" id="tests">
  <h3>
    <a href="#tests" name="tests" class="pilcrow"></a>
Tests
  </h3>
</div>
<p>Test with nodeunit</p>
<pre><code class="bash">$ npm <span class="hljs-built_in">test</span>
</code></pre>
<p>Published under the <a href="http://opensource.org/licenses/MIT">MIT License</a>.</p>
</div>
  </div>
</body>
</html>
