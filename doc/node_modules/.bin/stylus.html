<!DOCTYPE html>
<html>
<head>
  <title>stylus</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/.bin/stylus";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>stylus</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module dependencies.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)
  , stylus = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../lib/stylus'</span>)
  , basename = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>).basename
  , dirname = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>).dirname
  , extname = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>).extname
  , resolve = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>).resolve
  , join = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>).join
  , isWindows = process.platform === <span class="hljs-string">'win32'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>Arguments.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> args = process.argv.slice(<span class="hljs-number">2</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compare flag.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> compare = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compress flag.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> compress = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>CSS conversion flag.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> convertCSS = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>Line numbers flag.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> linenos = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<div class="dox">
<div class="summary">
<p>CSS class prefix.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> prefix = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>Print to stdout flag.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> print = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<div class="dox">
<div class="summary">
<p>Firebug flag</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> firebug = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sourcemap flag</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> sourcemap = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<div class="dox">
<div class="summary">
<p>Files to processes.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> files = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>Import paths.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> paths = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<div class="dox">
<div class="summary">
<p>Destination directory.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> dest;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<div class="dox">
<div class="summary">
<p>Watcher hash.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> watchers;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<div class="dox">
<div class="summary">
<p>Enable REPL.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> interactive;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<div class="dox">
<div class="summary">
<p>Plugins.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> plugins = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<div class="dox">
<div class="summary">
<p>Optional url() function.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> urlFunction = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<div class="dox">
<div class="summary">
<p>Include CSS on import.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> includeCSS = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<div class="dox">
<div class="summary">
<p>Set file imports.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> imports = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<div class="dox">
<div class="summary">
<p>Resolve relative urls</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> resolveURL = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<div class="dox">
<div class="summary">
<p>Disable cache.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> disableCache = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<div class="dox">
<div class="summary">
<p>Display dependencies flag.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> deps = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<div class="dox">
<div class="summary">
<p>Hoist at-rules.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> hoist = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<div class="dox">
<div class="summary">
<p>Usage docs.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> usage = [
    <span class="hljs-string">''</span>
  , <span class="hljs-string">'  Usage: stylus [options] [command] [&lt; in [&gt; out]]'</span>
  , <span class="hljs-string">'                [file|dir ...]'</span>
  , <span class="hljs-string">''</span>
  , <span class="hljs-string">'  Commands:'</span>
  , <span class="hljs-string">''</span>
  , <span class="hljs-string">'    help [&lt;type&gt;:]&lt;prop&gt; Opens help info at MDN for &lt;prop&gt; in'</span>
  , <span class="hljs-string">'                         your default browser. Optionally'</span>
  , <span class="hljs-string">'                         searches other resources of &lt;type&gt;:'</span>
  , <span class="hljs-string">'                         safari opera w3c ms caniuse quirksmode'</span>
  , <span class="hljs-string">''</span>
  , <span class="hljs-string">'  Options:'</span>
  , <span class="hljs-string">''</span>
  , <span class="hljs-string">'    -i, --interactive       Start interactive REPL'</span>
  , <span class="hljs-string">'    -u, --use &lt;path&gt;        Utilize the Stylus plugin at &lt;path&gt;'</span>
  , <span class="hljs-string">'    -U, --inline            Utilize image inlining via data URI support'</span>
  , <span class="hljs-string">'    -w, --watch             Watch file(s) for changes and re-compile'</span>
  , <span class="hljs-string">'    -o, --out &lt;dir&gt;         Output to &lt;dir&gt; when passing files'</span>
  , <span class="hljs-string">'    -C, --css &lt;src&gt; [dest]  Convert CSS input to Stylus'</span>
  , <span class="hljs-string">'    -I, --include &lt;path&gt;    Add &lt;path&gt; to lookup paths'</span>
  , <span class="hljs-string">'    -c, --compress          Compress CSS output'</span>
  , <span class="hljs-string">'    -d, --compare           Display input along with output'</span>
  , <span class="hljs-string">'    -f, --firebug           Emits debug infos in the generated CSS that'</span>
  , <span class="hljs-string">'                            can be used by the FireStylus Firebug plugin'</span>
  , <span class="hljs-string">'    -l, --line-numbers      Emits comments in the generated CSS'</span>
  , <span class="hljs-string">'                            indicating the corresponding Stylus line'</span>
  , <span class="hljs-string">'    -m, --sourcemap         Generates a sourcemap in sourcemaps v3 format'</span>
  , <span class="hljs-string">'    --sourcemap-inline      Inlines sourcemap with full source text in base64 format'</span>
  , <span class="hljs-string">'    --sourcemap-root &lt;url&gt;  "sourceRoot" property of the generated sourcemap'</span>
  , <span class="hljs-string">'    --sourcemap-base &lt;path&gt; Base &lt;path&gt; from which sourcemap and all sources are relative'</span>
  , <span class="hljs-string">'    -P, --prefix [prefix]   prefix all css classes'</span>
  , <span class="hljs-string">'    -p, --print             Print out the compiled CSS'</span>
  , <span class="hljs-string">'    --import &lt;file&gt;         Import stylus &lt;file&gt;'</span>
  , <span class="hljs-string">'    --include-css           Include regular CSS on @import'</span>
  , <span class="hljs-string">'    -D, --deps              Display dependencies of the compiled file'</span>
  , <span class="hljs-string">'    --disable-cache         Disable caching'</span>
  , <span class="hljs-string">'    --hoist-atrules         Move @import and @charset to the top'</span>
  , <span class="hljs-string">'    -r, --resolve-url       Resolve relative urls inside imports'</span>
  , <span class="hljs-string">'    --resolve-url-nocheck   Like --resolve-url but without file existence check'</span>
  , <span class="hljs-string">'    -V, --version           Display the version of Stylus'</span>
  , <span class="hljs-string">'    -h, --help              Display help information'</span>
  , <span class="hljs-string">''</span>
].join(<span class="hljs-string">'\n'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<div class="dox">
<div class="summary">
<p>Handle arguments.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> arg;
<span class="hljs-keyword">while</span> (args.length) {
  arg = args.shift();
  <span class="hljs-keyword">switch</span> (arg) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-h'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--help'</span>:
      <span class="hljs-built_in">console</span>.error(usage);
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-d'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--compare'</span>:
      compare = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-c'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--compress'</span>:
      compress = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-C'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--css'</span>:
      convertCSS = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-f'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--firebug'</span>:
      firebug = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-l'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--line-numbers'</span>:
      linenos = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-m'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--sourcemap'</span>:
      sourcemap = {};
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--sourcemap-inline'</span>:
      sourcemap = sourcemap || {};
      sourcemap.inline = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--sourcemap-root'</span>:
      <span class="hljs-keyword">var</span> url = args.shift();
      <span class="hljs-keyword">if</span> (!url) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'--sourcemap-root &lt;url&gt; required'</span>);
      sourcemap = sourcemap || {};
      sourcemap.sourceRoot = url;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--sourcemap-base'</span>:
      <span class="hljs-keyword">var</span> path = args.shift();
      <span class="hljs-keyword">if</span> (!path) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'--sourcemap-base &lt;path&gt; required'</span>);
      sourcemap = sourcemap || {};
      sourcemap.basePath = path;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-P'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--prefix'</span>:
      prefix = args.shift();
      <span class="hljs-keyword">if</span> (!prefix) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'--prefix &lt;prefix&gt; required'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-p'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--print'</span>:
      print = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-V'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--version'</span>:
      <span class="hljs-built_in">console</span>.log(stylus.version);
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-o'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--out'</span>:
      dest = args.shift();
      <span class="hljs-keyword">if</span> (!dest) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'--out &lt;dir&gt; required'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'help'</span>:
      <span class="hljs-keyword">var</span> name = args.shift()
        , browser = name.split(<span class="hljs-string">':'</span>);
      <span class="hljs-keyword">if</span> (browser.length &gt; <span class="hljs-number">1</span>) {
        name = [].slice.call(browser, <span class="hljs-number">1</span>).join(<span class="hljs-string">':'</span>);
        browser = browser[<span class="hljs-number">0</span>];
      } <span class="hljs-keyword">else</span> {
        name = browser[<span class="hljs-number">0</span>];
        browser = <span class="hljs-string">''</span>;
      }
      <span class="hljs-keyword">if</span> (!name) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'help &lt;property&gt; required'</span>);
      help(name);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--include-css'</span>:
      includeCSS = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--disable-cache'</span>:
      disableCache = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--hoist-atrules'</span>:
      hoist = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-i'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--repl'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--interactive'</span>:
      interactive = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-I'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--include'</span>:
      <span class="hljs-keyword">var</span> path = args.shift();
      <span class="hljs-keyword">if</span> (!path) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'--include &lt;path&gt; required'</span>);
      paths.push(path);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-w'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--watch'</span>:
      watchers = {};
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-U'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--inline'</span>:
      args.unshift(<span class="hljs-string">'--use'</span>, <span class="hljs-string">'url'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-u'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--use'</span>:
      <span class="hljs-keyword">var</span> options;
      <span class="hljs-keyword">var</span> path = args.shift();
      <span class="hljs-keyword">if</span> (!path) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'--use &lt;path&gt; required'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>options</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (<span class="hljs-string">'--with'</span> == args[<span class="hljs-number">0</span>]) {
        args.shift();
        options = args.shift();
        <span class="hljs-keyword">if</span> (!options) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'--with &lt;options&gt; required'</span>);
        options = <span class="hljs-built_in">eval</span>(<span class="hljs-string">'('</span> + options + <span class="hljs-string">')'</span>);
      }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>url support</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (<span class="hljs-string">'url'</span> == path) {
        urlFunction = options || {};
      } <span class="hljs-keyword">else</span> {
        paths.push(dirname(path));
        plugins.push({ <span class="hljs-attr">path</span>: path, <span class="hljs-attr">options</span>: options });
      }
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--import'</span>:
      <span class="hljs-keyword">var</span> file = args.shift();
      <span class="hljs-keyword">if</span> (!file) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'--import &lt;file&gt; required'</span>);
      imports.push(file);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-r'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--resolve-url'</span>:
      resolveURL = {};
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--resolve-url-nocheck'</span>:
      resolveURL = { <span class="hljs-attr">nocheck</span>: <span class="hljs-literal">true</span> };
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'-D'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'--deps'</span>:
      deps = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      files.push(arg);
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<p>if --watch is used, assume we are
not working with stdio</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">if</span> (watchers &amp;&amp; !files.length) {
  files = fs.readdirSync(process.cwd())
    .filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>)</span>{
    <span class="hljs-keyword">return</span> file.match(<span class="hljs-regexp">/\.styl$/</span>);
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>--sourcemap flag is not working with stdio</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">if</span> (sourcemap &amp;&amp; !files.length) sourcemap = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<div class="dox">
<div class="summary">
<p>Open the default browser to the CSS property <code>name</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">name</span>
<span class="dox_type">String</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">help</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">var</span> url
    , exec = <span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>).exec
    , command;

  name = <span class="hljs-built_in">encodeURIComponent</span>(name);

  <span class="hljs-keyword">switch</span> (browser) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'safari'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'webkit'</span>:
      url = <span class="hljs-string">'https://developer.apple.com/library/safari/search/?q='</span> + name;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'opera'</span>:
      url = <span class="hljs-string">'http://dev.opera.com/search/?term='</span> + name;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'w3c'</span>:
      url = <span class="hljs-string">'http://www.google.com/search?q=site%3Awww.w3.org%2FTR+'</span> + name;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'ms'</span>:
      url = <span class="hljs-string">'http://social.msdn.microsoft.com/search/en-US/ie?query='</span> + name + <span class="hljs-string">'&amp;refinement=59%2c61'</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'caniuse'</span>:
      url = <span class="hljs-string">'http://caniuse.com/#search='</span> + name;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'quirksmode'</span>:
      url = <span class="hljs-string">'http://www.google.com/search?q=site%3Awww.quirksmode.org+'</span> + name;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      url = <span class="hljs-string">'https://developer.mozilla.org/en/CSS/'</span> + name;
  }

  <span class="hljs-keyword">switch</span> (process.platform) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'linux'</span>: command = <span class="hljs-string">'x-www-browser'</span>; <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>: command = <span class="hljs-string">'open'</span>;
  }

  exec(command + <span class="hljs-string">' "'</span> + url + <span class="hljs-string">'"'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    process.exit(<span class="hljs-number">0</span>);
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<p>Compilation options</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">if</span> (files.length &gt; <span class="hljs-number">1</span> &amp;&amp; isCSS(dest)) {
  dest = dirname(dest);
}

<span class="hljs-keyword">var</span> options = {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'stdin'</span>
  , <span class="hljs-attr">compress</span>: compress
  , <span class="hljs-attr">firebug</span>: firebug
  , <span class="hljs-attr">linenos</span>: linenos
  , <span class="hljs-attr">sourcemap</span>: sourcemap
  , <span class="hljs-attr">paths</span>: [process.cwd()].concat(paths)
  , <span class="hljs-attr">prefix</span>: prefix
  , <span class="hljs-attr">dest</span>: dest
  , <span class="hljs-string">'hoist atrules'</span>: hoist
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<p>Buffer stdin</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> str = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<p>Convert CSS to Stylus</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">if</span> (convertCSS) {
    <span class="hljs-keyword">switch</span> (files.length) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
      compileCSSFile(files[<span class="hljs-number">0</span>], files[<span class="hljs-number">1</span>]);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
      <span class="hljs-keyword">var</span> file = files[<span class="hljs-number">0</span>];
      compileCSSFile(file, join(dirname(file), basename(file, extname(file))) + <span class="hljs-string">'.styl'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">var</span> stdin = process.openStdin();
      stdin.setEncoding(<span class="hljs-string">'utf8'</span>);
      stdin.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chunk</span>)</span>{ str += chunk; });
      stdin.on(<span class="hljs-string">'end'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">var</span> out = stylus.convertCSS(str);
        <span class="hljs-built_in">console</span>.log(out);
      });
  }
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (interactive) {
  repl();
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (deps) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>if --deps is used, just display list of the dependencies
not working with stdio and dirs</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  displayDeps();
} <span class="hljs-keyword">else</span> {
  <span class="hljs-keyword">if</span> (files.length) {
    compileFiles(files);
  } <span class="hljs-keyword">else</span> {
    compileStdio();
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<div class="dox">
<div class="summary">
<p>Start Stylus REPL.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">repl</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> options = { <span class="hljs-attr">cache</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">filename</span>: <span class="hljs-string">'stdin'</span>, <span class="hljs-attr">imports</span>: [join(__dirname, <span class="hljs-string">'..'</span>, <span class="hljs-string">'lib'</span>, <span class="hljs-string">'functions'</span>)] }
    , parser = <span class="hljs-keyword">new</span> stylus.Parser(<span class="hljs-string">''</span>, options)
    , evaluator = <span class="hljs-keyword">new</span> stylus.Evaluator(parser.parse(), options)
    , rl = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>)
    , repl = rl.createInterface(process.stdin, process.stdout, autocomplete)
    , global = evaluator.global.scope;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>expose BIFs</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  evaluator.evaluate();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<p>readline</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  repl.setPrompt(<span class="hljs-string">'&gt; '</span>);
  repl.prompt();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<p>HACK: flat-list auto-complete</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">autocomplete</span>(<span class="hljs-params">line</span>)</span>{
    <span class="hljs-keyword">var</span> out = process.stdout
      , keys = <span class="hljs-built_in">Object</span>.keys(global.locals)
      , len = keys.length
      , words = line.split(<span class="hljs-regexp">/\s+/</span>)
      , word = words.pop()
      , names = []
      , name
      , node
      , key;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<p>find words that match</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; ++i) {
      key = keys[i];
      <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == key.indexOf(word)) {
        node = global.lookup(key);
        <span class="hljs-keyword">switch</span> (node.nodeName) {
          <span class="hljs-keyword">case</span> <span class="hljs-string">'function'</span>:
            names.push(node.toString());
            <span class="hljs-keyword">break</span>;
          <span class="hljs-keyword">default</span>:
            names.push(key);
        }
      }
    }

    <span class="hljs-keyword">return</span> [names, line];
  };

  repl.on(<span class="hljs-string">'line'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>)</span>{
    <span class="hljs-keyword">if</span> (!line.trim().length) <span class="hljs-keyword">return</span> repl.prompt();
    parser = <span class="hljs-keyword">new</span> stylus.Parser(line, options);
    parser.state.push(<span class="hljs-string">'expression'</span>);
    evaluator.return = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">var</span> expr = parser.parse();
      evaluator.root = expr;
      <span class="hljs-keyword">var</span> ret = evaluator.evaluate();
      <span class="hljs-keyword">var</span> node;
      <span class="hljs-keyword">while</span> (node = ret.nodes.pop()) {
        <span class="hljs-keyword">if</span> (!node.suppress) {
          <span class="hljs-keyword">var</span> str = node.toString();
          <span class="hljs-keyword">if</span> (<span class="hljs-string">'('</span> == str[<span class="hljs-number">0</span>]) str = str.replace(<span class="hljs-regexp">/^\(|\)$/g</span>, <span class="hljs-string">''</span>);
          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'\033[90m=&gt; \033[0m'</span> + highlight(str));
          <span class="hljs-keyword">break</span>;
        }
      }
      repl.prompt();
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'\033[31merror: %s\033[0m'</span>, err.message || err.stack);
      repl.prompt();
    }
  });

  repl.on(<span class="hljs-string">'SIGINT'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-built_in">console</span>.log();
    process.exit(<span class="hljs-number">0</span>);
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<div class="dox">
<div class="summary">
<p>Highlight the given string of Stylus.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">highlight</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> str
    .replace(<span class="hljs-regexp">/(#)?(\d+(\.\d+)?)/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$<span class="hljs-number">0</span>, $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span></span>)</span>{
      <span class="hljs-keyword">return</span> $<span class="hljs-number">1</span> ? $<span class="hljs-number">0</span> : <span class="hljs-string">'\033[36m'</span> + $<span class="hljs-number">2</span> + <span class="hljs-string">'\033[0m'</span>;
    })
    .replace(<span class="hljs-regexp">/(#[\da-fA-F]+)/g</span>, <span class="hljs-string">'\033[33m$1\033[0m'</span>)
    .replace(<span class="hljs-regexp">/('.*?'|".*?")/g</span>, <span class="hljs-string">'\033[32m$1\033[0m'</span>);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<div class="dox">
<div class="summary">
<p>Convert a CSS file to a Styl file</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileCSSFile</span>(<span class="hljs-params">file, fileOut</span>) </span>{
  fs.stat(file, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, stat</span>)</span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    <span class="hljs-keyword">if</span> (stat.isFile()) {
      fs.readFile(file, <span class="hljs-string">'utf8'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, str</span>)</span>{
        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
        <span class="hljs-keyword">var</span> styl = stylus.convertCSS(str);
        fs.writeFile(fileOut, styl, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>{
         <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
        });
      });
    }
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compile with stdio.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileStdio</span>(<span class="hljs-params"></span>) </span>{
  process.stdin.setEncoding(<span class="hljs-string">'utf8'</span>);
  process.stdin.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chunk</span>)</span>{ str += chunk; });
  process.stdin.on(<span class="hljs-string">'end'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<p>Compile to css</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> style = stylus(str, options);
    <span class="hljs-keyword">if</span> (includeCSS) style.set(<span class="hljs-string">'include css'</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">if</span> (disableCache) style.set(<span class="hljs-string">'cache'</span>, <span class="hljs-literal">false</span>);
    usePlugins(style);
    importFiles(style);
    style.render(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, css</span>)</span>{
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
      <span class="hljs-keyword">if</span> (compare) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'\n\x1b[1mInput:\x1b[0m'</span>);
        <span class="hljs-built_in">console</span>.log(str);
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'\n\x1b[1mOutput:\x1b[0m'</span>);
      }
      <span class="hljs-built_in">console</span>.log(css);
      <span class="hljs-keyword">if</span> (compare) <span class="hljs-built_in">console</span>.log();
    });
  }).resume();
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compile the given files.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileFiles</span>(<span class="hljs-params">files</span>) </span>{
  files.forEach(compileFile);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<div class="dox">
<div class="summary">
<p>Display dependencies of the compiled files.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayDeps</span>(<span class="hljs-params"></span>) </span>{
  files.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>)</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<p>ensure file exists</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    fs.stat(file, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, stat</span>)</span>{
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
      fs.readFile(file, <span class="hljs-string">'utf8'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, str</span>)</span>{
        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
        options.filename = file;
        <span class="hljs-keyword">var</span> style = stylus(str, options);

        usePlugins(style);
        importFiles(style);
        <span class="hljs-built_in">console</span>.log(style.deps().join(<span class="hljs-string">'\n'</span>));
      });
    });
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compile the given file.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileFile</span>(<span class="hljs-params">file</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<p>ensure file exists</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  fs.stat(file, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, stat</span>)</span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<p>file</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (stat.isFile()) {
      fs.readFile(file, <span class="hljs-string">'utf8'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, str</span>)</span>{
        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
        options.filename = file;
        options._imports = [];
        <span class="hljs-keyword">var</span> style = stylus(str, options);
        <span class="hljs-keyword">if</span> (includeCSS) style.set(<span class="hljs-string">'include css'</span>, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">if</span> (disableCache) style.set(<span class="hljs-string">'cache'</span>, <span class="hljs-literal">false</span>);
        <span class="hljs-keyword">if</span> (sourcemap) style.set(<span class="hljs-string">'sourcemap'</span>, sourcemap);

        usePlugins(style);
        importFiles(style);
        style.render(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, css</span>)</span>{
          watchImports(file, options._imports);
          <span class="hljs-keyword">if</span> (err) {
            <span class="hljs-keyword">if</span> (watchers) {
              <span class="hljs-built_in">console</span>.error(err.stack || err.message);
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">throw</span> err;
            }
          } <span class="hljs-keyword">else</span> {
            writeFile(file, css);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<p>write sourcemap</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (sourcemap &amp;&amp; !sourcemap.inline) {
              writeSourcemap(file, style.sourcemap);
            }
          }
        });
      });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<p>directory</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (stat.isDirectory()) {
      fs.readdir(file, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, files</span>)</span>{
        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
        files.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">path</span>)</span>{
          <span class="hljs-keyword">return</span> path.match(<span class="hljs-regexp">/\.styl$/</span>);
        }).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">path</span>)</span>{
          <span class="hljs-keyword">return</span> join(file, path);
        }).forEach(compileFile);
      });
    }
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<div class="dox">
<div class="summary">
<p>Write the given CSS output.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createPath</span>(<span class="hljs-params">file, sourceMap</span>) </span>{
  <span class="hljs-keyword">var</span> out;
  <span class="hljs-keyword">if</span> (files.length === <span class="hljs-number">1</span> &amp;&amp; isCSS(dest)) {
    <span class="hljs-keyword">return</span> [dest, sourceMap ? <span class="hljs-string">'.map'</span> : <span class="hljs-string">''</span>].join(<span class="hljs-string">''</span>);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<p>--out support</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  out = [basename(file, extname(file)), sourceMap ? <span class="hljs-string">'.css.map'</span> : <span class="hljs-string">'.css'</span>].join(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">return</span> dest
    ? join(dest, out)
    : join(dirname(file), out);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if the given path is a CSS file.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isCSS</span>(<span class="hljs-params">file</span>) </span>{
  <span class="hljs-keyword">return</span> file &amp;&amp; <span class="hljs-string">'.css'</span> === extname(file);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeFile</span>(<span class="hljs-params">file, css</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<p>--print support</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (print) <span class="hljs-keyword">return</span> process.stdout.write(css);
  <span class="hljs-keyword">var</span> path = createPath(file);
  fs.writeFile(path, css, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'  \033[90mcompiled\033[0m %s'</span>, path);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<p>--watch support</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    watch(file, file);
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<div class="dox">
<div class="summary">
<p>Write the given sourcemap.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeSourcemap</span>(<span class="hljs-params">file, sourcemap</span>) </span>{
  <span class="hljs-keyword">var</span> path = createPath(file, <span class="hljs-literal">true</span>);
  fs.writeFile(path, <span class="hljs-built_in">JSON</span>.stringify(sourcemap), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<p>don't output log message if --print is present</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!print) <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'  \033[90mgenerated\033[0m %s'</span>, path);
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<div class="dox">
<div class="summary">
<p>Watch the given <code>file</code> and recompiling <code>rootFile</code> when modified.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watch</span>(<span class="hljs-params">file, rootFile</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<p>not watching</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!watchers) <span class="hljs-keyword">return</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<p>already watched</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (watchers[file]) {
    watchers[file][rootFile] = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span>;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<p>watch the file itself</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  watchers[file] = {};
  watchers[file][rootFile] = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">if</span> (print) {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Stylus CLI Error: Watch and print cannot be used together'</span>);
    process.exit(<span class="hljs-number">1</span>);
  }
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'  \033[90mwatching\033[0m %s'</span>, file);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<p>if is windows use fs.watch api instead
TODO: remove watchFile when fs.watch() works on osx etc</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (isWindows) {
    fs.watch(file, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
      <span class="hljs-keyword">if</span> (event === <span class="hljs-string">'change'</span>) compile();
    });
  } <span class="hljs-keyword">else</span> {
    fs.watchFile(file, { <span class="hljs-attr">interval</span>: <span class="hljs-number">300</span> }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">curr, prev</span>) </span>{
      <span class="hljs-keyword">if</span> (curr.mtime &gt; prev.mtime) compile();
    });
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compile</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> rootFile <span class="hljs-keyword">in</span> watchers[file]) {
      compileFile(rootFile);
    }
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<div class="dox">
<div class="summary">
<p>Watch <code>imports</code>, re-compiling <code>file</code> when they change.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watchImports</span>(<span class="hljs-params">file, imports</span>) </span>{
  imports.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">imported</span>)</span>{
    <span class="hljs-keyword">if</span> (!imported.path) <span class="hljs-keyword">return</span>;
    watch(imported.path, file);
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<div class="dox">
<div class="summary">
<p>Utilize plugins.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">usePlugins</span>(<span class="hljs-params">style</span>) </span>{
  plugins.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">plugin</span>)</span>{
    <span class="hljs-keyword">var</span> path = plugin.path;
    <span class="hljs-keyword">var</span> options = plugin.options;
    fn = <span class="hljs-built_in">require</span>(<span class="hljs-regexp">/^\.+\//</span>.test(path) ? resolve(path) : path);
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'function'</span> != <span class="hljs-keyword">typeof</span> fn) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'plugin '</span> + path + <span class="hljs-string">' does not export a function'</span>);
    }
    style.use(fn(options));
  });

  <span class="hljs-keyword">if</span> (urlFunction) {
    style.define(<span class="hljs-string">'url'</span>, stylus.url(urlFunction));
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (resolveURL) {
    style.define(<span class="hljs-string">'url'</span>, stylus.resolver(resolveURL));
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<div class="dox">
<div class="summary">
<p>Imports the indicated files.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">importFiles</span>(<span class="hljs-params">style</span>) </span>{
  imports.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>) </span>{
    style.import(file);
  });
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
