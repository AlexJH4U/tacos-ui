<!DOCTYPE html>
<html>
<head>
  <title>imurmurhash.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/imurmurhash/imurmurhash.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>imurmurhash.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<a href="http://github.com/homebrewing/brauhaus-diff">http://github.com/homebrewing/brauhaus-diff</a>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<a href="http://github.com/garycourt/murmurhash-js">http://github.com/garycourt/murmurhash-js</a>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<a href="http://sites.google.com/site/murmurhash/">http://sites.google.com/site/murmurhash/</a>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> cache;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Call this function without <code>new</code> to use the cached object (good for
single-threaded environments), or with <code>new</code> to create a new object.</p>
<p>@param {string} key A UTF-16 or ASCII string
@param {number} seed An optional positive integer
@return {object} A MurmurHash3 object for incremental hashing</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MurmurHash3</span>(<span class="hljs-params">key, seed</span>) </span>{
        <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> MurmurHash3 ? <span class="hljs-keyword">this</span> : cache;
        m.reset(seed)
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> key === <span class="hljs-string">'string'</span> &amp;&amp; key.length &gt; <span class="hljs-number">0</span>) {
            m.hash(key);
        }

        <span class="hljs-keyword">if</span> (m !== <span class="hljs-keyword">this</span>) {
            <span class="hljs-keyword">return</span> m;
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>Incrementally add a string to this hash</p>
<p>@param {string} key A UTF-16 or ASCII string
@return {object} this</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    MurmurHash3.prototype.hash = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">var</span> h1, k1, i, top, len;

        len = key.length;
        <span class="hljs-keyword">this</span>.len += len;

        k1 = <span class="hljs-keyword">this</span>.k1;
        i = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">this</span>.rem) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: k1 ^= len &gt; i ? (key.charCodeAt(i++) &amp; <span class="hljs-number">0xffff</span>) : <span class="hljs-number">0</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: k1 ^= len &gt; i ? (key.charCodeAt(i++) &amp; <span class="hljs-number">0xffff</span>) &lt;&lt; <span class="hljs-number">8</span> : <span class="hljs-number">0</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: k1 ^= len &gt; i ? (key.charCodeAt(i++) &amp; <span class="hljs-number">0xffff</span>) &lt;&lt; <span class="hljs-number">16</span> : <span class="hljs-number">0</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                k1 ^= len &gt; i ? (key.charCodeAt(i) &amp; <span class="hljs-number">0xff</span>) &lt;&lt; <span class="hljs-number">24</span> : <span class="hljs-number">0</span>;
                k1 ^= len &gt; i ? (key.charCodeAt(i++) &amp; <span class="hljs-number">0xff00</span>) &gt;&gt; <span class="hljs-number">8</span> : <span class="hljs-number">0</span>;
        }

        <span class="hljs-keyword">this</span>.rem = (len + <span class="hljs-keyword">this</span>.rem) &amp; <span class="hljs-number">3</span>; <span class="hljs-comment">// &amp; 3 is same as % 4</span>
        len -= <span class="hljs-keyword">this</span>.rem;
        <span class="hljs-keyword">if</span> (len &gt; <span class="hljs-number">0</span>) {
            h1 = <span class="hljs-keyword">this</span>.h1;
            <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) {
                k1 = (k1 * <span class="hljs-number">0x2d51</span> + (k1 &amp; <span class="hljs-number">0xffff</span>) * <span class="hljs-number">0xcc9e0000</span>) &amp; <span class="hljs-number">0xffffffff</span>;
                k1 = (k1 &lt;&lt; <span class="hljs-number">15</span>) | (k1 &gt;&gt;&gt; <span class="hljs-number">17</span>);
                k1 = (k1 * <span class="hljs-number">0x3593</span> + (k1 &amp; <span class="hljs-number">0xffff</span>) * <span class="hljs-number">0x1b870000</span>) &amp; <span class="hljs-number">0xffffffff</span>;

                h1 ^= k1;
                h1 = (h1 &lt;&lt; <span class="hljs-number">13</span>) | (h1 &gt;&gt;&gt; <span class="hljs-number">19</span>);
                h1 = (h1 * <span class="hljs-number">5</span> + <span class="hljs-number">0xe6546b64</span>) &amp; <span class="hljs-number">0xffffffff</span>;

                <span class="hljs-keyword">if</span> (i &gt;= len) {
                    <span class="hljs-keyword">break</span>;
                }

                k1 = ((key.charCodeAt(i++) &amp; <span class="hljs-number">0xffff</span>)) ^
                     ((key.charCodeAt(i++) &amp; <span class="hljs-number">0xffff</span>) &lt;&lt; <span class="hljs-number">8</span>) ^
                     ((key.charCodeAt(i++) &amp; <span class="hljs-number">0xffff</span>) &lt;&lt; <span class="hljs-number">16</span>);
                top = key.charCodeAt(i++);
                k1 ^= ((top &amp; <span class="hljs-number">0xff</span>) &lt;&lt; <span class="hljs-number">24</span>) ^
                      ((top &amp; <span class="hljs-number">0xff00</span>) &gt;&gt; <span class="hljs-number">8</span>);
            }

            k1 = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">this</span>.rem) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: k1 ^= (key.charCodeAt(i + <span class="hljs-number">2</span>) &amp; <span class="hljs-number">0xffff</span>) &lt;&lt; <span class="hljs-number">16</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: k1 ^= (key.charCodeAt(i + <span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xffff</span>) &lt;&lt; <span class="hljs-number">8</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: k1 ^= (key.charCodeAt(i) &amp; <span class="hljs-number">0xffff</span>);
            }

            <span class="hljs-keyword">this</span>.h1 = h1;
        }

        <span class="hljs-keyword">this</span>.k1 = k1;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>Get the result of this hash</p>
<p>@return {number} The 32-bit hash</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    MurmurHash3.prototype.result = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> k1, h1;
        
        k1 = <span class="hljs-keyword">this</span>.k1;
        h1 = <span class="hljs-keyword">this</span>.h1;

        <span class="hljs-keyword">if</span> (k1 &gt; <span class="hljs-number">0</span>) {
            k1 = (k1 * <span class="hljs-number">0x2d51</span> + (k1 &amp; <span class="hljs-number">0xffff</span>) * <span class="hljs-number">0xcc9e0000</span>) &amp; <span class="hljs-number">0xffffffff</span>;
            k1 = (k1 &lt;&lt; <span class="hljs-number">15</span>) | (k1 &gt;&gt;&gt; <span class="hljs-number">17</span>);
            k1 = (k1 * <span class="hljs-number">0x3593</span> + (k1 &amp; <span class="hljs-number">0xffff</span>) * <span class="hljs-number">0x1b870000</span>) &amp; <span class="hljs-number">0xffffffff</span>;
            h1 ^= k1;
        }

        h1 ^= <span class="hljs-keyword">this</span>.len;

        h1 ^= h1 &gt;&gt;&gt; <span class="hljs-number">16</span>;
        h1 = (h1 * <span class="hljs-number">0xca6b</span> + (h1 &amp; <span class="hljs-number">0xffff</span>) * <span class="hljs-number">0x85eb0000</span>) &amp; <span class="hljs-number">0xffffffff</span>;
        h1 ^= h1 &gt;&gt;&gt; <span class="hljs-number">13</span>;
        h1 = (h1 * <span class="hljs-number">0xae35</span> + (h1 &amp; <span class="hljs-number">0xffff</span>) * <span class="hljs-number">0xc2b20000</span>) &amp; <span class="hljs-number">0xffffffff</span>;
        h1 ^= h1 &gt;&gt;&gt; <span class="hljs-number">16</span>;

        <span class="hljs-keyword">return</span> h1 &gt;&gt;&gt; <span class="hljs-number">0</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>Reset the hash object for reuse</p>
<p>@param {number} seed An optional positive integer</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    MurmurHash3.prototype.reset = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">seed</span>) </span>{
        <span class="hljs-keyword">this</span>.h1 = <span class="hljs-keyword">typeof</span> seed === <span class="hljs-string">'number'</span> ? seed : <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.rem = <span class="hljs-keyword">this</span>.k1 = <span class="hljs-keyword">this</span>.len = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>A cached object to use. This can be safely used if you're in a single-
threaded environment, otherwise you need to create new hashes to use.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    cache = <span class="hljs-keyword">new</span> MurmurHash3();

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(<span class="hljs-built_in">module</span>) != <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-built_in">module</span>.exports = MurmurHash3;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.MurmurHash3 = MurmurHash3;
    }
}());

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
