<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/html-minifier/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#htmlminifier">HTMLMinifier</a>
      </div>

      <div class="heading h2">
        <a href="#minification-comparison">Minification comparison</a>
      </div>

      <div class="heading h2">
        <a href="#options-quick-reference">Options Quick Reference</a>
      </div>

      <div class="heading h3">
        <a href="#sorting-attributes-style-classes">Sorting attributes / style classes</a>
      </div>

      <div class="heading h2">
        <a href="#special-cases">Special cases</a>
      </div>

      <div class="heading h3">
        <a href="#ignoring-chunks-of-markup">Ignoring chunks of markup</a>
      </div>

      <div class="heading h3">
        <a href="#preserving-svg-tags">Preserving SVG tags</a>
      </div>

      <div class="heading h3">
        <a href="#working-with-invalid-markup">Working with invalid markup</a>
      </div>

      <div class="heading h2">
        <a href="#installation-instructions">Installation Instructions</a>
      </div>

      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h3">
        <a href="#node.js">Node.js</a>
      </div>

      <div class="heading h2">
        <a href="#running-benchmarks">Running benchmarks</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="htmlminifier">
  <h1>
    <a href="#htmlminifier" name="htmlminifier" class="pilcrow"></a>
HTMLMinifier
  </h1>
</div>
<p><a href="https://www.npmjs.com/package/html-minifier"><img src="https://img.shields.io/npm/v/html-minifier.svg" alt="NPM version"></a>
<a href="https://travis-ci.org/kangax/html-minifier"><img src="https://img.shields.io/travis/kangax/html-minifier.svg" alt="Build Status"></a>
<a href="https://david-dm.org/kangax/html-minifier"><img src="https://img.shields.io/david/kangax/html-minifier.svg" alt="Dependency Status"></a></p>
<p><a href="https://kangax.github.io/html-minifier/">HTMLMinifier</a> is a highly <strong>configurable</strong>, <strong>well-tested</strong>, JavaScript-based HTML minifier.</p>
<p>See <a href="http://perfectionkills.com/experimenting-with-html-minifier/">corresponding blog post</a> for all the gory details of <a href="http://perfectionkills.com/experimenting-with-html-minifier/#how_it_works">how it works</a>, <a href="http://perfectionkills.com/experimenting-with-html-minifier/#options">description of each option</a>, <a href="http://perfectionkills.com/experimenting-with-html-minifier/#field_testing">testing results</a> and <a href="http://perfectionkills.com/experimenting-with-html-minifier/#cost_and_benefits">conclusions</a>.</p>
<p><a href="https://kangax.github.io/html-minifier/tests/">Test suite is available online</a>.</p>
<p>Also see corresponding <a href="https://github.com/stereobooster/html_minifier">Ruby wrapper</a>, and for Node.js, <a href="https://github.com/gruntjs/grunt-contrib-htmlmin">Grunt plugin</a>, <a href="https://github.com/jonschlinkert/gulp-htmlmin">Gulp module</a>, <a href="https://github.com/koajs/html-minifier">Koa middleware wrapper</a> and <a href="https://github.com/melonmanchan/express-minify-html">Express middleware wrapper</a>.</p>
<p>For lint-like capabilities take a look at <a href="https://github.com/kangax/html-lint">HTMLLint</a>.</p>
<div class="pilwrap" id="minification-comparison">
  <h2>
    <a href="#minification-comparison" name="minification-comparison" class="pilcrow"></a>
Minification comparison
  </h2>
</div>
<p>How does HTMLMinifier compare to other solutions — <a href="http://www.willpeavy.com/minifier/">HTML Minifier from Will Peavy</a> (1st result in <a href="https://www.google.com/#q=html+minifier">Google search for &quot;html minifier&quot;</a>) as well as <a href="http://htmlcompressor.com">htmlcompressor.com</a> and <a href="https://github.com/Swaagie/minimize">minimize</a>?</p>
<table>
<thead>
<tr>
<th>Site</th>
<th style="text-align:center">Original size <em>(KB)</em></th>
<th style="text-align:right">HTMLMinifier</th>
<th style="text-align:right">minimize</th>
<th style="text-align:right">Will Peavy</th>
<th style="text-align:right">htmlcompressor.com</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.google.com/">Google</a></td>
<td style="text-align:center">47</td>
<td style="text-align:right"><strong>43</strong></td>
<td style="text-align:right">47</td>
<td style="text-align:right">49</td>
<td style="text-align:right">47</td>
</tr>
<tr>
<td><a href="https://twitter.com/">Twitter</a></td>
<td style="text-align:center">146</td>
<td style="text-align:right"><strong>115</strong></td>
<td style="text-align:right">138</td>
<td style="text-align:right">155</td>
<td style="text-align:right">138</td>
</tr>
<tr>
<td><a href="https://github.com/kangax/html-minifier">HTMLMinifier</a></td>
<td style="text-align:center">171</td>
<td style="text-align:right"><strong>128</strong></td>
<td style="text-align:right">143</td>
<td style="text-align:right">148</td>
<td style="text-align:right">142</td>
</tr>
<tr>
<td><a href="https://www.nytimes.com/">New York Times</a></td>
<td style="text-align:center">207</td>
<td style="text-align:right"><strong>139</strong></td>
<td style="text-align:right">158</td>
<td style="text-align:right">155</td>
<td style="text-align:right">144</td>
</tr>
<tr>
<td><a href="https://stackoverflow.com/">Stack Overflow</a></td>
<td style="text-align:center">256</td>
<td style="text-align:right"><strong>199</strong></td>
<td style="text-align:right">209</td>
<td style="text-align:right">217</td>
<td style="text-align:right">206</td>
</tr>
<tr>
<td><a href="https://getbootstrap.com/docs/3.3/css/">Bootstrap CSS</a></td>
<td style="text-align:center">271</td>
<td style="text-align:right"><strong>260</strong></td>
<td style="text-align:right">269</td>
<td style="text-align:right">229</td>
<td style="text-align:right">269</td>
</tr>
<tr>
<td><a href="https://www.bbc.co.uk/">BBC</a></td>
<td style="text-align:center">294</td>
<td style="text-align:right"><strong>238</strong></td>
<td style="text-align:right">285</td>
<td style="text-align:right">289</td>
<td style="text-align:right">278</td>
</tr>
<tr>
<td><a href="https://www.amazon.co.uk/">Amazon</a></td>
<td style="text-align:center">377</td>
<td style="text-align:right"><strong>328</strong></td>
<td style="text-align:right">368</td>
<td style="text-align:right">379</td>
<td style="text-align:right">n/a</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/President_of_the_United_States">Wikipedia</a></td>
<td style="text-align:center">520</td>
<td style="text-align:right"><strong>484</strong></td>
<td style="text-align:right">504</td>
<td style="text-align:right">523</td>
<td style="text-align:right">503</td>
</tr>
<tr>
<td><a href="https://www.nbc.com/">NBC</a></td>
<td style="text-align:center">669</td>
<td style="text-align:right"><strong>633</strong></td>
<td style="text-align:right">668</td>
<td style="text-align:right">669</td>
<td style="text-align:right">n/a</td>
</tr>
<tr>
<td><a href="https://eloquentjavascript.net/1st_edition/print.html">Eloquent Javascript</a></td>
<td style="text-align:center">870</td>
<td style="text-align:right"><strong>815</strong></td>
<td style="text-align:right">840</td>
<td style="text-align:right">864</td>
<td style="text-align:right">n/a</td>
</tr>
<tr>
<td><a href="https://kangax.github.io/compat-table/es6/">ES6 table</a></td>
<td style="text-align:center">5243</td>
<td style="text-align:right"><strong>4472</strong></td>
<td style="text-align:right">4963</td>
<td style="text-align:right">n/a</td>
<td style="text-align:right">n/a</td>
</tr>
<tr>
<td><a href="https://tc39.github.io/ecma262/">ES6 draft</a></td>
<td style="text-align:center">6072</td>
<td style="text-align:right"><strong>5449</strong></td>
<td style="text-align:right">5615</td>
<td style="text-align:right">n/a</td>
<td style="text-align:right">n/a</td>
</tr>
</tbody>
</table>
<div class="pilwrap" id="options-quick-reference">
  <h2>
    <a href="#options-quick-reference" name="options-quick-reference" class="pilcrow"></a>
Options Quick Reference
  </h2>
</div>
<p>Most of the options are disabled by default.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>caseSensitive</code></td>
<td>Treat attributes in case sensitive manner (useful for custom HTML tags)</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>collapseBooleanAttributes</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#collapse_boolean_attributes">Omit attribute values from boolean attributes</a></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>collapseInlineTagWhitespace</code></td>
<td>Don't leave any spaces between <code>display:inline;</code> elements when collapsing. Must be used in conjunction with <code>collapseWhitespace=true</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>collapseWhitespace</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#collapse_whitespace">Collapse white space that contributes to text nodes in a document tree</a></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>conservativeCollapse</code></td>
<td>Always collapse to 1 space (never remove it entirely). Must be used in conjunction with <code>collapseWhitespace=true</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>customAttrAssign</code></td>
<td>Arrays of regex'es that allow to support custom attribute assign expressions (e.g. <code>'&lt;div flex?=&quot;{{mode != cover}}&quot;&gt;&lt;/div&gt;'</code>)</td>
<td><code>[ ]</code></td>
</tr>
<tr>
<td><code>customAttrCollapse</code></td>
<td>Regex that specifies custom attribute to strip newlines from (e.g. <code>/ng-class/</code>)</td>
<td></td>
</tr>
<tr>
<td><code>customAttrSurround</code></td>
<td>Arrays of regex'es that allow to support custom attribute surround expressions (e.g. <code>&lt;input {{#if value}}checked=&quot;checked&quot;{{/if}}&gt;</code>)</td>
<td><code>[ ]</code></td>
</tr>
<tr>
<td><code>customEventAttributes</code></td>
<td>Arrays of regex'es that allow to support custom event attributes for <code>minifyJS</code> (e.g. <code>ng-click</code>)</td>
<td><code>[ /^on[a-z]{3,}$/ ]</code></td>
</tr>
<tr>
<td><code>decodeEntities</code></td>
<td>Use direct Unicode characters whenever possible</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>html5</code></td>
<td>Parse input according to HTML5 specifications</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>ignoreCustomComments</code></td>
<td>Array of regex'es that allow to ignore certain comments, when matched</td>
<td><code>[ /^!/ ]</code></td>
</tr>
<tr>
<td><code>ignoreCustomFragments</code></td>
<td>Array of regex'es that allow to ignore certain fragments, when matched (e.g. <code>&lt;?php ... ?&gt;</code>, <code>{{ ... }}</code>, etc.)</td>
<td><code>[ /&lt;%[\s\S]*?%&gt;/, /&lt;\?[\s\S]*?\?&gt;/ ]</code></td>
</tr>
<tr>
<td><code>includeAutoGeneratedTags</code></td>
<td>Insert tags generated by HTML parser</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>keepClosingSlash</code></td>
<td>Keep the trailing slash on singleton elements</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>maxLineLength</code></td>
<td>Specify a maximum line length. Compressed output will be split by newlines at valid HTML split-points</td>
<td></td>
</tr>
<tr>
<td><code>minifyCSS</code></td>
<td>Minify CSS in style elements and style attributes (uses <a href="https://github.com/jakubpawlowicz/clean-css">clean-css</a>)</td>
<td><code>false</code> (could be <code>true</code>, <code>Object</code>, <code>Function(text, type)</code>)</td>
</tr>
<tr>
<td><code>minifyJS</code></td>
<td>Minify JavaScript in script elements and event attributes (uses <a href="https://github.com/mishoo/UglifyJS2">UglifyJS</a>)</td>
<td><code>false</code> (could be <code>true</code>, <code>Object</code>, <code>Function(text, inline)</code>)</td>
</tr>
<tr>
<td><code>minifyURLs</code></td>
<td>Minify URLs in various attributes (uses <a href="https://github.com/stevenvachon/relateurl">relateurl</a>)</td>
<td><code>false</code> (could be <code>String</code>, <code>Object</code>, <code>Function(text)</code>)</td>
</tr>
<tr>
<td><code>preserveLineBreaks</code></td>
<td>Always collapse to 1 line break (never remove it entirely) when whitespace between tags include a line break. Must be used in conjunction with <code>collapseWhitespace=true</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>preventAttributesEscaping</code></td>
<td>Prevents the escaping of the values of attributes</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>processConditionalComments</code></td>
<td>Process contents of conditional comments through minifier</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>processScripts</code></td>
<td>Array of strings corresponding to types of script elements to process through minifier (e.g. <code>text/ng-template</code>, <code>text/x-handlebars-template</code>, etc.)</td>
<td><code>[ ]</code></td>
</tr>
<tr>
<td><code>quoteCharacter</code></td>
<td>Type of quote to use for attribute values (' or &quot;)</td>
<td></td>
</tr>
<tr>
<td><code>removeAttributeQuotes</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_attribute_quotes">Remove quotes around attributes when possible</a></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>removeComments</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_comments">Strip HTML comments</a></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>removeEmptyAttributes</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_empty_or_blank_attributes">Remove all attributes with whitespace-only values</a></td>
<td><code>false</code> (could be <code>true</code>, <code>Function(attrName, tag)</code>)</td>
</tr>
<tr>
<td><code>removeEmptyElements</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_empty_elements">Remove all elements with empty contents</a></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>removeOptionalTags</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_optional_tags">Remove optional tags</a></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>removeRedundantAttributes</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_redundant_attributes">Remove attributes when value matches default.</a></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>removeScriptTypeAttributes</code></td>
<td>Remove <code>type=&quot;text/javascript&quot;</code> from <code>script</code> tags. Other <code>type</code> attribute values are left intact</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>removeStyleLinkTypeAttributes</code></td>
<td>Remove <code>type=&quot;text/css&quot;</code> from <code>style</code> and <code>link</code> tags. Other <code>type</code> attribute values are left intact</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>removeTagWhitespace</code></td>
<td>Remove space between attributes whenever possible. <strong>Note that this will result in invalid HTML!</strong></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>sortAttributes</code></td>
<td><a href="#sorting-attributes--style-classes.html">Sort attributes by frequency</a></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>sortClassName</code></td>
<td><a href="#sorting-attributes--style-classes.html">Sort style classes by frequency</a></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>trimCustomFragments</code></td>
<td>Trim white space around <code>ignoreCustomFragments</code>.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>useShortDoctype</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#use_short_doctype">Replaces the <code>doctype</code> with the short (HTML5) doctype</a></td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<div class="pilwrap" id="sorting-attributes-style-classes">
  <h3>
    <a href="#sorting-attributes-style-classes" name="sorting-attributes-style-classes" class="pilcrow"></a>
Sorting attributes / style classes
  </h3>
</div>
<p>Minifier options like <code>sortAttributes</code> and <code>sortClassName</code> won't impact the plain-text size of the output. However, they form long repetitive chains of characters that should improve compression ratio of gzip used in HTTP compression.</p>
<div class="pilwrap" id="special-cases">
  <h2>
    <a href="#special-cases" name="special-cases" class="pilcrow"></a>
Special cases
  </h2>
</div>
<div class="pilwrap" id="ignoring-chunks-of-markup">
  <h3>
    <a href="#ignoring-chunks-of-markup" name="ignoring-chunks-of-markup" class="pilcrow"></a>
Ignoring chunks of markup
  </h3>
</div>
<p>If you have chunks of markup you would like preserved, you can wrap them <code>&lt;!-- htmlmin:ignore --&gt;</code>.</p>
<div class="pilwrap" id="preserving-svg-tags">
  <h3>
    <a href="#preserving-svg-tags" name="preserving-svg-tags" class="pilcrow"></a>
Preserving SVG tags
  </h3>
</div>
<p>SVG tags are automatically recognized, and when they are minified, both case-sensitivity and closing-slashes are preserved, regardless of the minification settings used for the rest of the file.</p>
<div class="pilwrap" id="working-with-invalid-markup">
  <h3>
    <a href="#working-with-invalid-markup" name="working-with-invalid-markup" class="pilcrow"></a>
Working with invalid markup
  </h3>
</div>
<p>HTMLMinifier <strong>can't work with invalid or partial chunks of markup</strong>. This is because it parses markup into a tree structure, then modifies it (removing anything that was specified for removal, ignoring anything that was specified to be ignored, etc.), then it creates a markup out of that tree and returns it.</p>
<p>Input markup (e.g. <code>&lt;p id=&quot;&quot;&gt;foo</code>)</p>
<p>↓</p>
<p>Internal representation of markup in a form of tree (e.g. <code>{ tag: &quot;p&quot;, attr: &quot;id&quot;, children: [&quot;foo&quot;] }</code>)</p>
<p>↓</p>
<p>Transformation of internal representation (e.g. removal of <code>id</code> attribute)</p>
<p>↓</p>
<p>Output of resulting markup (e.g. <code>&lt;p&gt;foo&lt;/p&gt;</code>)</p>
<p>HTMLMinifier can't know that original markup was only half of the tree; it does its best to try to parse it as a full tree and it loses information about tree being malformed or partial in the beginning. As a result, it can't create a partial/malformed tree at the time of the output.</p>
<div class="pilwrap" id="installation-instructions">
  <h2>
    <a href="#installation-instructions" name="installation-instructions" class="pilcrow"></a>
Installation Instructions
  </h2>
</div>
<p>From NPM for use as a command line app:</p>
<pre><code class="shell">npm install html-minifier -g
</code></pre>
<p>From NPM for programmatic use:</p>
<pre><code class="shell">npm install html-minifier
</code></pre>
<p>From Git:</p>
<pre><code class="shell">git clone git://github.com/kangax/html-minifier.git
cd html-minifier
npm link .
</code></pre>
<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h2>
</div>
<p>For command line usage please see <code>html-minifier --help</code></p>
<div class="pilwrap" id="node.js">
  <h3>
    <a href="#node.js" name="node.js" class="pilcrow"></a>
Node.js
  </h3>
</div>
<pre><code class="js"><span class="hljs-keyword">var</span> minify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html-minifier'</span>).minify;
<span class="hljs-keyword">var</span> result = minify(<span class="hljs-string">'&lt;p title="blah" id="moo"&gt;foo&lt;/p&gt;'</span>, {
  <span class="hljs-attr">removeAttributeQuotes</span>: <span class="hljs-literal">true</span>
});
result; <span class="hljs-comment">// '&lt;p title=blah id=moo&gt;foo&lt;/p&gt;'</span>
</code></pre>
<div class="pilwrap" id="running-benchmarks">
  <h2>
    <a href="#running-benchmarks" name="running-benchmarks" class="pilcrow"></a>
Running benchmarks
  </h2>
</div>
<p>Benchmarks for minified HTML:</p>
<pre><code class="shell">node benchmark.js
</code></pre>
</div>
  </div>
</body>
</html>
